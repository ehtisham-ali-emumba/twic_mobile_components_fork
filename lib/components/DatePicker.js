var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.DatePickerField=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var React=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _reactNativePaper=require("react-native-paper");var _reactNativeDatepicker=_interopRequireDefault(require("react-native-datepicker"));var _reactIf=require("react-if");var _ramda=require("ramda");var _AntDesign=_interopRequireDefault(require("react-native-vector-icons/AntDesign"));var _commons=require("../commons");var _AppStyledComponents=require("./AppStyledComponents");var _Utilities=require("../commons/Utilities");var _this=this,_jsxFileName="/Users/mbp/Documents/twic/twic_mobile_components-master-fork/src/components/DatePicker.tsx";function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||typeof obj!=="object"&&typeof obj!=="function"){return{default:obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj.default=obj;if(cache){cache.set(obj,newObj);}return newObj;}var CalendarIcon=function CalendarIcon(props){var color=props.color,iconTop=props.iconTop;var pickerStyle=_commons.APP_CONSTANTS.IS_ANDROID?{position:'absolute',top:iconTop,right:!_commons.APP_CONSTANTS.IS_ANDROID?0:5,color:color}:{color:color};return React.createElement(_AntDesign.default,{name:"calendar",style:pickerStyle,size:_commons.APP_CONSTANTS.IS_ANDROID?_commons.Fonts.size.tiny:_commons.Fonts.size.medium+1,color:color,__self:_this,__source:{fileName:_jsxFileName,lineNumber:25,columnNumber:10}});};var PICKER_THEME={fonts:{medium:{fontFamily:'TTCommons-Regular'}},roundness:_commons.Metrics.baseMargin};var isPlatformIos=_reactNative.Platform.OS==='ios';var DatePickerField=function DatePickerField(props){var _React$useState=React.useState({pickerColor:_commons.Colors.newDimGrey,text:_commons.Colors.newCharcoalDarkGrey,icon:_commons.Colors.charcoalLightGrey}),_React$useState2=(0,_slicedToArray2.default)(_React$useState,2),colors=_React$useState2[0],setColors=_React$useState2[1];var textInputRef=React.useRef(null);var onConfirmDate=props.onConfirmDate,_props$label=props.label,label=_props$label===void 0?'':_props$label,_props$value=props.value,value=_props$value===void 0?'':_props$value,_props$labelPaddingTo=props.labelPaddingTop,labelPaddingTop=_props$labelPaddingTo===void 0?4:_props$labelPaddingTo,_props$testId=props.testId,testId=_props$testId===void 0?'':_props$testId,_props$errorMessage=props.errorMessage,errorMessage=_props$errorMessage===void 0?'':_props$errorMessage,_props$disabled=props.disabled,disabled=_props$disabled===void 0?false:_props$disabled,_props$textInputConta=props.textInputContainerStyle,textInputContainerStyle=_props$textInputConta===void 0?{}:_props$textInputConta,_props$textProps=props.textProps,textProps=_props$textProps===void 0?{}:_props$textProps,_props$iconProps=props.iconProps,iconProps=_props$iconProps===void 0?{}:_props$iconProps,_props$pickerMode=props.pickerMode,pickerMode=_props$pickerMode===void 0?'outlined':_props$pickerMode,_props$RenderCustomIc=props.RenderCustomIcon,RenderCustomIcon=_props$RenderCustomIc===void 0?CalendarIcon:_props$RenderCustomIc,_props$fieldStyle=props.fieldStyle,fieldStyle=_props$fieldStyle===void 0?{width:'100%',paddingLeft:0,paddingRight:isPlatformIos?0:5,paddingVertical:5}:_props$fieldStyle,_props$onOpenHandler=props.onOpenHandler,onOpenHandler=_props$onOpenHandler===void 0?function(){}:_props$onOpenHandler,_props$datePickerProp=props.datePickerProps,datePickerProps=_props$datePickerProp===void 0?{}:_props$datePickerProp;var initialValue=(0,_ramda.clone)(value);var pickerStateColor=disabled?_commons.Colors.newDisabled:(0,_Utilities.isEmptyOrNil)(errorMessage)?colors.pickerColor:_commons.Colors.error;var iconColor=disabled?_commons.Colors.disabledText:colors.icon;var paddingTop=pickerMode==='flat'?_commons.Metrics.screenHorizontalPadding:0;var _onCancelPress=function onCancelPress(){onConfirmDate(initialValue);};var handleDateSubmission=function handleDateSubmission(date){onConfirmDate(date);};var onCloseModal=function onCloseModal(){textInputRef.current.handleBlur();setColors((0,_extends2.default)({},colors,{pickerColor:_commons.Colors.newDimGrey,icon:_commons.Colors.charcoalLightGrey}));};return React.createElement(React.Fragment,null,React.createElement(_reactNativePaper.TextInput,(0,_extends2.default)({ref:textInputRef,testID:testId,accessibilityLabel:testId,theme:(0,_extends2.default)({},PICKER_THEME,{colors:{placeholder:pickerStateColor,primary:_commons.Colors.blue,error:_commons.Colors.error,disabled:_commons.Colors.newDisabled}}),style:(0,_extends2.default)({backgroundColor:_commons.Colors.white},textInputContainerStyle),mode:pickerMode,label:!(0,_Utilities.isEmptyOrNil)(value)?label:'',value:!(0,_Utilities.isEmptyOrNil)(value)?value:'',error:!(0,_Utilities.isEmptyOrNil)(errorMessage)?true:false,underlineColor:pickerStateColor,underlineColorAndroid:pickerStateColor,textAlign:"auto",render:function render(){return React.createElement(_reactNativeDatepicker.default,(0,_extends2.default)({date:value,mode:"date",placeholder:"Choose date",format:"ll",minDate:"1970-01-01",maxDate:new Date(),confirmBtnText:"Done",cancelBtnText:"Cancel",onOpenModal:function onOpenModal(){textInputRef.current.handleFocus();setColors((0,_extends2.default)({},colors,{pickerColor:_commons.Colors.newBlue,icon:_commons.Colors.newBlue}));onOpenHandler();},onCloseModal:onCloseModal,testID:testId,onCancelPress:function onCancelPress(){return _onCancelPress();},onDateChange:function onDateChange(date){onCloseModal();handleDateSubmission(date);},showIcon:true,allowFontScaling:false,adjustsFontSizeToFit:true,iconComponent:React.createElement(RenderCustomIcon,(0,_extends2.default)({},iconProps,{color:(0,_Utilities.isEmptyOrNil)(errorMessage)?iconColor:_commons.Colors.error,__self:_this,__source:{fileName:_jsxFileName,lineNumber:146,columnNumber:28}})),style:fieldStyle,customStyles:{dateTouchBody:{flexDirection:'row',height:45,paddingHorizontal:15,paddingTop:paddingTop},dateInput:{top:-2,height:20,borderWidth:0,alignItems:'flex-start'},btnTextConfirm:{color:_commons.Colors.blue,fontFamily:'TTCommons-DemiBold',fontSize:_commons.Fonts.size.h3},dateText:{fontSize:_commons.Fonts.size.small,fontFamily:'TTCommons-Regular',color:_commons.Colors.black,paddingTop:labelPaddingTop},placeholderText:{fontSize:_commons.Fonts.size.small,fontFamily:'TTCommons-Regular',paddingTop:labelPaddingTop,color:_commons.Colors.charcoalLightGrey},datePicker:{justifyContent:'center'}}},datePickerProps,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:122,columnNumber:11}}));}},textProps,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:100,columnNumber:7}})),React.createElement(_reactIf.If,{condition:!disabled&&!(0,_Utilities.isEmptyOrNil)(errorMessage),__self:_this,__source:{fileName:_jsxFileName,lineNumber:188,columnNumber:7}},React.createElement(_reactIf.Then,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:189,columnNumber:9}},React.createElement(_reactNative.View,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:190,columnNumber:11}},React.createElement(_AppStyledComponents.AppText,{color:_commons.Colors.error,fontSize:_commons.Fonts.size.small,__self:_this,__source:{fileName:_jsxFileName,lineNumber:191,columnNumber:13}},errorMessage)))));};exports.DatePickerField=DatePickerField;
//# sourceMappingURL=DatePicker.js.map